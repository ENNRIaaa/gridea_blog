<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://www.shiguangping.com</id>
    <title>æ™‚å…‰ç“¶</title>
    <updated>2021-02-24T15:55:42.646Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://www.shiguangping.com"/>
    <link rel="self" href="https://www.shiguangping.com/atom.xml"/>
    <subtitle>æç‚ã®ç”Ÿæ´»å­¸ç¿’æ—¥èªŒ</subtitle>
    <logo>https://www.shiguangping.com/images/avatar.png</logo>
    <icon>https://www.shiguangping.com/favicon.ico</icon>
    <rights>All rights reserved 2021, æ™‚å…‰ç“¶</rights>
    <entry>
        <title type="html"><![CDATA[Spring Boot Actuator]]></title>
        <id>https://www.shiguangping.com/post/spring-boot-actuator/</id>
        <link href="https://www.shiguangping.com/post/spring-boot-actuator/">
        </link>
        <updated>2021-02-24T14:23:00.000Z</updated>
        <content type="html"><![CDATA[<h2 id="spring-boot-æ·»åŠ actuator">Spring Boot æ·»åŠ Actuator</h2>
<p>å¼•å…¥ä¾èµ–ã€‚</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—®Actuatorç«¯ç‚¹ã€‚</p>
<pre><code>http://localhost:8081/actuator
</code></pre>
<p>åç«¯è¿”å›Jsonæ•°æ®ï¼Œé‡Œé¢åŒ…å«å››ä¸ªActuatorå¯¼èˆªç«¯ç‚¹ã€‚</p>
<pre><code class="language-json">{
  &quot;_links&quot;: {
    &quot;self&quot;: {
      &quot;href&quot;: &quot;http://localhost:8081/actuator&quot;,
      &quot;templated&quot;: false
    },
    &quot;health&quot;: {
      &quot;href&quot;: &quot;http://localhost:8081/actuator/health&quot;,
      &quot;templated&quot;: false
    },
    &quot;health-path&quot;: {
      &quot;href&quot;: &quot;http://localhost:8081/actuator/health/{*path}&quot;,
      &quot;templated&quot;: true
    },
    &quot;info&quot;: {
      &quot;href&quot;: &quot;http://localhost:8081/actuator/info&quot;,
      &quot;templated&quot;: false
    }
  }
}
</code></pre>
<p>ç«¯ç‚¹è¯´æ˜ï¼š</p>
<ul>
<li><code>/actuator</code></li>
<li><code>/actuator/health</code>ï¼šå¥åº·çŠ¶æ€</li>
<li><code>/actuator/health/{*path}</code></li>
<li><code>/actuator/info</code></li>
</ul>
<p>ç‚¹å‡»<code>/actuator/health</code>ç«¯ç‚¹ï¼Œåç«¯è¿”å›é¡¹ç›®çŠ¶æ€</p>
<pre><code class="language-json">{
  &quot;status&quot;: &quot;UP&quot;
}
</code></pre>
<p>åç«¯æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œé‡å¯SpringBootåº”ç”¨ã€‚</p>
<pre><code class="language-yaml"># Actuatorå±•ç¤ºè¯¦æƒ…
management:
  endpoint:
    health:
      show-details: always
</code></pre>
<p>è®¿é—®<code>/actuator/health</code>ç«¯ç‚¹ã€‚</p>
<pre><code class="language-json">{
  &quot;status&quot;: &quot;UP&quot;,
  &quot;components&quot;: {
    &quot;diskSpace&quot;: {
      &quot;status&quot;: &quot;UP&quot;,
      &quot;details&quot;: {
        &quot;total&quot;: 999995129856,
        &quot;free&quot;: 796211884032,
        &quot;threshold&quot;: 10485760,
        &quot;exists&quot;: true
      }
    },
    &quot;ping&quot;: {
      &quot;status&quot;: &quot;UP&quot;
    }
  }
}
</code></pre>
<p>ä»è¿”å›æ•°æ®å¯ä»¥çœ‹åˆ°ç£ç›˜ç©ºé—´ï¼Œç£ç›˜çŠ¶æ€ï¼Œå½“ç£ç›˜å¯ç”¨ç©ºé—´ä½äº<code>threshold</code>å€¼æ—¶ï¼Œè®¤ä¸ºè¯¥ç£ç›˜æ˜¯ä¸å¥åº·çš„ã€‚</p>
<p>è¿˜å¯ä»¥çœ‹åˆ°pingçš„çŠ¶æ€ã€‚</p>
<p><code>status</code>çš„å››ç§çŠ¶æ€ï¼š</p>
<ul>
<li><code>UP</code>ï¼šæ­£å¸¸</li>
<li><code>DOWN</code>ï¼šé‡åˆ°äº†é—®é¢˜</li>
<li><code>OUT OF SERVICE</code>ï¼šèµ„æºæœªåœ¨ä½¿ç”¨ï¼Œæˆ–ä¸è¯¥ä½¿ç”¨</li>
<li><code>UNKNOW</code>ï¼šä½ç½®</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SpringBoot ç»Ÿä¸€å¼‚å¸¸å¤„ç†]]></title>
        <id>https://www.shiguangping.com/post/spring-boot-exception-handle/</id>
        <link href="https://www.shiguangping.com/post/spring-boot-exception-handle/">
        </link>
        <updated>2021-02-18T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<h2 id="ç»Ÿä¸€è¿”å›æ•°æ®æ¥å£">ç»Ÿä¸€è¿”å›æ•°æ®æ¥å£</h2>
<h3 id="å®šä¹‰æ¥å£è¿”å›æ•°æ®ç»“æ„">å®šä¹‰æ¥å£è¿”å›æ•°æ®ç»“æ„</h3>
<pre><code class="language-json">{
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;SUCCESS&quot;,
  &quot;data&quot;: {}
}
</code></pre>
<h3 id="æ•°æ®æ¥å£å­—æ®µæ¨¡å‹å®šä¹‰">æ•°æ®æ¥å£å­—æ®µæ¨¡å‹å®šä¹‰</h3>
<pre><code class="language-java">package net.pjsk.demo.domain;

import lombok.Data;

/**
 * æ¥å£è¿”å›æ•°æ®æ¨¡å‹
 *
 * @author liyan
 * @date 2021.2.19
 */
@Data
public class Result&lt;T&gt; {

    private Integer code;

    private String message;

    private T data;
}
</code></pre>
<h3 id="å°è£…æ¥å£è¿”å›æ–¹æ³•æˆåŠŸ-å¤±è´¥">å°è£…æ¥å£è¿”å›æ–¹æ³•ï¼ˆæˆåŠŸã€å¤±è´¥ï¼‰</h3>
<pre><code class="language-java">package net.pjsk.demo.util;

import cn.hutool.core.util.ObjectUtil;
import net.pjsk.demo.domain.Result;

/**
 * å°è£…æ¥å£è¿”å›æ–¹æ³•
 *
 * @author liyan
 * @date 2021.2.19
 */
public class ResultUtil {

    /**
     * æˆåŠŸ
     *
     * @param data
     * @return
     */
    public static Result success(Object data) {
        Result result = new Result();
        result.setCode(0);
        result.setMessage(&quot;SUCCESS&quot;);
        if (data != null) {
            result.setData(data);
        }
        return result;
    }

    /**
     * æˆåŠŸ(æ— éœ€è¿”å›æ•°æ®)
     *
     * @return
     */
    public static Result success() {
        return success(null);
    }

    /**
     * å¤±è´¥
     *
     * @param code
     * @param message
     * @return
     */
    public static Result error(Integer code, String message) {
        Result result = new Result();
        result.setCode(code);
        result.setMessage(message);
        return result;
    }
}
</code></pre>
<h2 id="ç»Ÿä¸€å¼‚å¸¸å¤„ç†">ç»Ÿä¸€å¼‚å¸¸å¤„ç†</h2>
<h3 id="çŠ¶æ€æ¶ˆæ¯æšä¸¾">çŠ¶æ€æ¶ˆæ¯æšä¸¾</h3>
<pre><code class="language-java">package net.pjsk.demo.enums;

/**
 * çŠ¶æ€æ¶ˆæ¯æšä¸¾
 *
 * @author liyan
 * @date 2021.2.19
 */

public enum MessageEnum {

    SYSTEM_ERROR(1001,&quot;ç³»ç»Ÿé”™è¯¯&quot;),
    NAME_EXCEEDED_CHARRACTER_LIMIT(2000, &quot;å§“åè¶…è¿‡äº†é™åˆ¶ï¼Œæœ€å¤§4ä¸ªå­—ç¬¦!&quot;);

    private Integer code;
    private String message;

    MessageEnum(Integer code, String message) {
        this.code = code;
        this.message = message;
    }

    public Integer getCode() {
        return code;
    }

    public String getMessage() {
        return message;
    }
}
</code></pre>
<h3 id="è‡ªå®šä¹‰å¼‚å¸¸ç±»">è‡ªå®šä¹‰å¼‚å¸¸ç±»</h3>
<pre><code class="language-java">package net.pjsk.demo.exception;

import net.pjsk.demo.enums.MessageEnum;

/**
 * è‡ªå®šä¹‰å¼‚å¸¸ç±»
 *
 * @author liyan
 * @date 2021.2.19
 */
public class UserException extends RuntimeException{

    private Integer code;

    public UserException(MessageEnum messageEnum){
        super(messageEnum.getMessage());
        this.code = messageEnum.getCode();
    }

    public Integer getCode(){
        return code;
    }

    public void setCode(Integer code){
        this.code = code;
    }
}
</code></pre>
<h3 id="controlleradvice-ç»Ÿä¸€å¤„ç†å¼‚å¸¸">@ControllerAdvice ç»Ÿä¸€å¤„ç†å¼‚å¸¸</h3>
<pre><code class="language-java">package net.pjsk.demo.handler;

import net.pjsk.demo.domain.Result;
import net.pjsk.demo.exception.UserException;
import net.pjsk.demo.util.ResultUtil;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.ResponseBody;

/**
 * ç»Ÿä¸€å¤„ç†å¼‚å¸¸
 *
 * @author liyan
 * @date 2021.2.19
 */
@ControllerAdvice
public class ExceptionHandle {

    private final static Logger logger = LoggerFactory.getLogger(ExceptionHandle.class);

    @ExceptionHandler(value = Exception.class)
    @ResponseBody
    public Result handle(Exception e) {
        logger.info(&quot;è¿›å…¥error&quot;);

        if (e instanceof UserException) {
            UserException userException = (UserException) e;
            return ResultUtil.error(userException.getCode(), userException.getMessage());
        } else {
            logger.error(&quot;ç³»ç»Ÿå¼‚å¸¸ {}&quot;, e);
            return ResultUtil.error(1000, &quot;ç³»ç»Ÿå¼‚å¸¸&quot;);
        }
    }


}
</code></pre>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<pre><code class="language-java">package net.pjsk.demo.controller;

import net.pjsk.demo.dao.UserDao;
import net.pjsk.demo.domain.Result;
import net.pjsk.demo.domain.User;
import net.pjsk.demo.enums.MessageEnum;
import net.pjsk.demo.exception.UserException;
import net.pjsk.demo.util.ResultUtil;
import org.springframework.web.bind.annotation.*;

/**
 * @author liyan
 * @date 2021.2.19
 */
@RequestMapping(&quot;/user&quot;)
@RestController
public class UserController {

    /**
     * è·å–ç”¨æˆ·åˆ—è¡¨
     *
     * @param exception
     * @return
     */
    @GetMapping(&quot;/{exception}&quot;)
    public Result&lt;?&gt; getUserList(@PathVariable(&quot;exception&quot;) Boolean exception) {
        if (exception) {
            // æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªé™¤é›¶å¼‚å¸¸
            int a = 1 / 0;
        }
        return ResultUtil.success(UserDao.getUserList());
    }

    /**
     * æ–°å¢ç”¨æˆ·
     *
     * @param user
     * @return
     */
    @PostMapping
    public Result&lt;?&gt; addUser(@RequestBody User user) {
        if (user.getName().length() &gt; 4) {
            throw new UserException(MessageEnum.NAME_EXCEEDED_CHARRACTER_LIMIT);
        }
        UserDao.add(user);
        return ResultUtil.success();
    }

}
</code></pre>
<h3 id="æµ‹è¯•æ­£å¸¸è¿”å›åŠå‘ç”Ÿå¼‚å¸¸">æµ‹è¯•æ­£å¸¸è¿”å›åŠå‘ç”Ÿå¼‚å¸¸</h3>
<p>æ­£å¸¸è¿”å›ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://images.shiguangping.com/imgs/20210220000658.png" alt="image-20210220000657896" loading="lazy"></figure>
<p>å‘ç”Ÿå¼‚å¸¸ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://images.shiguangping.com/imgs/20210220000756.png" alt="image-20210220000756723" loading="lazy"></figure>
<h3 id="æµ‹è¯•è‡ªå®šä¹‰å¼‚å¸¸">æµ‹è¯•è‡ªå®šä¹‰å¼‚å¸¸</h3>
<figure data-type="image" tabindex="3"><img src="https://images.shiguangping.com/imgs/20210220000839.png" alt="image-20210220000839465" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Java Lambdaè¡¨è¾¾å¼]]></title>
        <id>https://www.shiguangping.com/post/lambda/</id>
        <link href="https://www.shiguangping.com/post/lambda/">
        </link>
        <updated>2021-02-17T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<h2 id="äº†è§£å‡½æ•°å¼ç¼–ç¨‹">äº†è§£å‡½æ•°å¼ç¼–ç¨‹</h2>
<p>å‡½æ•°ï¼šåœ¨æ•°å­¦ä¸­ï¼Œå‡½æ•°å°±æ˜¯å°±è¾“å…¥é‡ã€è¾“å‡ºé‡çš„ä¸€å¥—è®¡ç®—æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯â€œæ‹¿æ•°æ®åšæ“ä½œâ€ã€‚</p>
<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå¼ºè°ƒé€šè¿‡é¢å‘å¯¹è±¡çš„æ€æƒ³è§£å†³é—®é¢˜ï¼›</p>
<p>è€Œå‡½æ•°å¼ç¼–ç¨‹å¿½ç•¥äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¤æ‚è¯­æ³•ï¼Œå±è”½è¿‡ç¨‹ï¼Œå¼ºè°ƒâ€œåšä»€ä¹ˆâ€ï¼Œå¿½ç•¥â€œæ€ä¹ˆåšâ€ã€‚</p>
<h2 id="å°æ —å­">å°æ —å­</h2>
<blockquote>
<p>éœ€æ±‚ï¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨æ§åˆ¶å°æ‰“å°ä¸€å¥è¯ï¼šâ€œçº¿ç¨‹å¯åŠ¨äº†â€ã€‚</p>
</blockquote>
<p><strong>æ–¹å¼ä¸€</strong></p>
<p>ä¼ ç»Ÿæ–¹å¼ï¼šåˆ›å»ºä¸€ä¸ªç±»<code>MyRunable</code>å®ç°<code>Runable</code>æ¥å£ï¼Œé€šè¿‡è¿™ç§å®ç°ç±»çš„æ–¹å¼å®ç°éœ€æ±‚ã€‚</p>
<pre><code class="language-java">package net.pjsk.demo;

/**
 * @author liyan
 * @date 2021.2.18
 */
public class MyRunable implements Runnable{
    @Override
    public void run() {
        System.out.println(&quot;çº¿ç¨‹å¯åŠ¨äº†&quot;);
    }
}
</code></pre>
<pre><code class="language-java">package net.pjsk.demo;

/**
 * @author liyan
 * @date 2021.2.18
 */
public class LambdaDemo {
    public static void main(String[] args) {
        // é€šè¿‡å®ç°ç±»çš„æ–¹å¼å®ç°
        MyRunable myRunable = new MyRunable();
        new Thread(myRunable).start();
    }
}
</code></pre>
<p><strong>æ–¹å¼äºŒ</strong></p>
<p>åŒ¿åå†…éƒ¨ç±»</p>
<pre><code class="language-java">package net.pjsk.demo;

/**
 * @author liyan
 * @date 2021.2.18
 */
public class LambdaDemo {
    public static void main(String[] args) {
        // é€šè¿‡åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼å®ç°
        new Thread(new Runnable() {
            @Override
            public void run() {
                System.out.println(&quot;çº¿ç¨‹å¯åŠ¨äº†&quot;);
            }
        }).start();
    }
}
</code></pre>
<p><strong>æ–¹å¼ä¸‰</strong></p>
<p>Lambdaè¡¨è¾¾å¼</p>
<pre><code class="language-java">package net.pjsk.demo;

/**
 * @author liyan
 * @date 2021.2.18
 */
public class LambdaDemo {
    public static void main(String[] args) {
        // é€šè¿‡Lambdaè¡¨è¾¾å¼å®ç°
        new Thread(() -&gt; {
            System.out.println(&quot;çº¿ç¨‹å¯åŠ¨äº†&quot;);
        }).start();
    }
} 
</code></pre>
<h2 id="lambda-è¡¨è¾¾å¼çš„æ ¼å¼">Lambda è¡¨è¾¾å¼çš„æ ¼å¼</h2>
<p>Lambdaè¡¨è¾¾å¼ç”±<code>å‚æ•°åˆ—è¡¨</code>ã€<code>ç®­å¤´</code>ã€<code>ä»£ç å—</code>ä¸‰éƒ¨åˆ†æ„æˆã€‚</p>
<pre><code class="language-java">new Thread(() -&gt; {
            System.out.println(&quot;çº¿ç¨‹å¯åŠ¨äº†&quot;);
        }).start();
</code></pre>
<h2 id="lambda-è¡¨è¾¾å¼ä½¿ç”¨å‰æ">Lambda è¡¨è¾¾å¼ä½¿ç”¨å‰æ</h2>
<ul>
<li>æœ‰ä¸€ä¸ªæ¥å£</li>
<li>è¯¥æ¥å£æœ‰ä¸”åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</li>
</ul>
<p>è¿™ç§æ¥å£ä¹Ÿæˆä¸ºâ€œå‡½æ•°å¼æ¥å£â€ã€‚</p>
<h2 id="ç»ƒä¹ ä¸€">ç»ƒä¹ ä¸€</h2>
<blockquote>
<ol>
<li>
<p>å®šä¹‰ä¸€ä¸ªæ¥å£(Eatable)ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œ void eat()</p>
</li>
<li>
<p>å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç±»(EatableDemo)ï¼Œé‡Œé¢æä¾›ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li>void useEatable(Eatable e)</li>
<li>main()æ–¹æ³•ï¼Œç”¨æ¥è°ƒç”¨useEatable()æ–¹æ³•</li>
</ol>
</li>
</ol>
</blockquote>
<pre><code class="language-java">package net.pjsk.test1;

// æ–¹å¼ä¸€éœ€è¦åˆ›å»ºæ¥å£çš„å®ç°ç±»ï¼Œå¹¶é‡å†™æ–¹æ³•
public class EatableImpl implements Eatable{
    @Override
    public void eat() {
        System.out.println(&quot;å¤šåƒè”¬èœå’Œæ°´æœ&quot;);
    }
}
</code></pre>
<pre><code class="language-java">package net.pjsk.test1;

/**
 * @author liyan
 * @date 2021.2.18
 */
public class EatableDemo {

    public static void main(String[] args) {
        // æ–¹å¼ä¸€ã€å…ˆåˆ›å»ºå®ç°ç±»é‡å†™eat()æ–¹æ³•ï¼Œå†ä½¿ç”¨
        Eatable eatable = new EatableImpl();
        useEatable(eatable);

        // æ–¹å¼äºŒã€ç›´æ¥ä¼ å…¥åŒ¿åå†…éƒ¨ç±»
        useEatable(new Eatable() {
            @Override
            public void eat() {
                System.out.println(&quot;å¤šåƒè”¬èœå’Œæ°´æœ&quot;);
            }
        });

        // æ–¹å¼ä¸‰ã€ ä½¿ç”¨Lambda è¡¨è¾¾å¼
        useEatable(() -&gt; {
            System.out.println(&quot;å¤šåƒè”¬èœå’Œæ°´æœ&quot;);
        });
    }

    public static void useEatable(Eatable e) {
        e.eat();
    }
}
</code></pre>
<h2 id="ç»ƒä¹ äºŒ">ç»ƒä¹ äºŒ</h2>
<blockquote>
<ol>
<li>
<p>å®šä¹‰ä¸€ä¸ªæ¥å£(Flyable)ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œ void fly(String s)</p>
</li>
<li>
<p>å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç±»(FlyableDemo)ï¼Œé‡Œé¢æä¾›ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
</li>
<li>
<p>void useEatable(Flyable f)</p>
</li>
<li>
<p>main()æ–¹æ³•ï¼Œç”¨æ¥è°ƒç”¨useFlyable()æ–¹æ³•</p>
</li>
</ol>
</blockquote>
<pre><code class="language-java">package net.pjsk.test2;

// æ–¹å¼ä¸€ï¼Œæ¥å£å®ç°ç±»
public class FlyableImpl implements Flyable {
    @Override
    public void fly(String s) {
        System.out.println(s + &quot;ä¼šé£&quot;);
    }
}

</code></pre>
<pre><code class="language-java">package net.pjsk.test2;

/**
 * @author liyan
 * @date 2021.2.18
 */
public class FlyableDemo {

    public static void main(String[] args) {

        // æ–¹å¼ä¸€ã€åˆ›å»ºæ¥å£å®ç°ç±»
        Flyable flyable = new FlyableImpl();
        useFlyable(flyable);

        // æ–¹å¼äºŒã€åŒ¿åå†…éƒ¨ç±»
        useFlyable(new Flyable() {
            @Override
            public void fly(String s) {
                System.out.println(s + &quot;ä¼šé£&quot;);
            }
        });

        // Lambda è¡¨è¾¾å¼
        useFlyable((s -&gt; {
            System.out.println(s + &quot;ä¼šé£&quot;);
        }));
    }

    public static void useFlyable(Flyable f) {
        f.fly(&quot;èŠ±èŠ±&quot;);
    }
}
</code></pre>
<h2 id="ç»ƒä¹ ä¸‰">ç»ƒä¹ ä¸‰</h2>
<blockquote>
<ol>
<li>
<p>å®šä¹‰ä¸€ä¸ªæ¥å£(Addable)ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œ int add(int x,int y)</p>
</li>
<li>
<p>å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç±»(FlyableDemo)ï¼Œé‡Œé¢æä¾›ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
</li>
<li>
<p>void useAddable(Addable a)</p>
</li>
<li>
<p>main()æ–¹æ³•ï¼Œç”¨æ¥è°ƒç”¨useAddable()æ–¹æ³•</p>
</li>
</ol>
</blockquote>
<pre><code class="language-java">package net.pjsk.test3;

/**
 * @author liyan
 * @date 2021.1.18
 */
public class AddableDemo {
    public static void main(String[] args) {

        // åŒ¿åå†…éƒ¨ç±»
        useAddable(new Addable() {
            @Override
            public int add(int x, int y) {
                return x + y;
            }
        });

        // Lambda è¡¨è¾¾å¼
        useAddable((x, y) -&gt; {
            return x + y;
        });
    }

    public static void useAddable(Addable a) {
        int result = a.add(1, 2);
        System.out.println(result);
    }
}
</code></pre>
<h2 id="lambda-è¡¨è¾¾å¼ç®€å†™">Lambda è¡¨è¾¾å¼ç®€å†™</h2>
<p>ç®€å†™è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‚æ•°åˆ—è¡¨ä¸­å‚æ•°çš„æ•°æ®ç±»å‹å¯ä»¥çœç•¥ï¼Œå¤šä¸ªå‚æ•°æ—¶ï¼Œå‚æ•°çš„æ•°æ®ç±»å‹è¦ä¹ˆéƒ½çœç•¥ï¼Œè¦ä¹ˆéƒ½ä¸çœç•¥ï¼›</li>
<li>å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå°æ‹¬å·ä¹Ÿå¯ä»¥çœç•¥ï¼›</li>
<li>ä»£ç å—åªæœ‰ä¸€è¡Œæ—¶ï¼Œå¤§æ‹¬å·å’Œåˆ†å·å¯ä»¥çœç•¥ï¼›å½“æœ‰returnæ—¶ï¼Œåˆ™returnä¹Ÿè¦çœç•¥ï¼›çœç•¥å¤§æ‹¬å·åˆ†å·æ—¶ï¼ŒLambda è¡¨è¾¾å¼è¦å†™æˆä¸€è¡Œã€‚</li>
</ul>
<h2 id="lambdaè¡¨è¾¾å¼å’ŒåŒ¿åå†…éƒ¨ç±»çš„åŒºåˆ«">Lambdaè¡¨è¾¾å¼å’ŒåŒ¿åå†…éƒ¨ç±»çš„åŒºåˆ«</h2>
<p>æ‰€éœ€ç±»å‹ä¸åŒï¼š</p>
<ul>
<li>åŒ¿åå†…éƒ¨ç±»ï¼šå¯ä»¥æ˜¯æ¥å£ã€æŠ½è±¡ç±»ã€å…·ä½“ç±»</li>
<li>Lambdaè¡¨è¾¾å¼ï¼šåªèƒ½æ˜¯æ¥å£</li>
</ul>
<p>ä½¿ç”¨é™åˆ¶ä¸åŒï¼š</p>
<ul>
<li>å¦‚æœæ¥å£ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼›</li>
<li>å¦‚æœæ¥å£ä¸­æœ‰å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</li>
</ul>
<p>å®ç°åŸç†ä¸åŒï¼š</p>
<ul>
<li>ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å½¢å¼ï¼Œåœ¨ç¨‹åºç¼–è¯‘åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªå•ç‹¬çš„.classå­—èŠ‚ç æ–‡ä»¶</li>
<li>ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œç¼–è¯‘åä¸ä¼šäº§ç”Ÿå•ç‹¬çš„å­—èŠ‚ç æ–‡ä»¶ï¼Œå¯¹åº”çš„å­—èŠ‚ç æ–‡ä»¶åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mybatis Pluså¤šç§Ÿæˆ·æ•°æ®éš”ç¦»]]></title>
        <id>https://www.shiguangping.com/post/mybatis-plus-tenant/</id>
        <link href="https://www.shiguangping.com/post/mybatis-plus-tenant/">
        </link>
        <updated>2021-01-26T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯å¤šç§Ÿæˆ·">ä»€ä¹ˆæ˜¯å¤šç§Ÿæˆ·</h2>
<p>å¤šç§Ÿæˆ·æŠ€æœ¯æˆ–ç§°å¤šé‡ç§ŸèµæŠ€æœ¯ï¼Œç®€ç§°å¤šç§Ÿæˆ·ã€‚æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„æŠ€æœ¯ï¼Œæ˜¯å®ç°å¦‚ä½•åœ¨å¤šç”¨æˆ·ç¯å¢ƒä¸‹ï¼ˆæ­¤å¤„çš„å¤šç”¨æˆ·ä¸€èˆ¬æ˜¯é¢å‘ä¼ä¸šç”¨æˆ·ï¼‰å…±ç”¨ç›¸åŒçš„ç³»ç»Ÿæˆ–ç¨‹åºç»„ä»¶ï¼Œå¹¶ä¸”å¯ç¡®ä¿å„ç”¨æˆ·é—´æ•°æ®çš„éš”ç¦»æ€§ã€‚</p>
<p>ç®€å•è®²ï¼šåœ¨ä¸€å°æœåŠ¡å™¨ä¸Šè¿è¡Œå•ä¸ªåº”ç”¨å®ä¾‹ï¼Œå®ƒä¸ºå¤šä¸ªç§Ÿæˆ·ï¼ˆå®¢æˆ·ï¼‰æä¾›æœåŠ¡ã€‚ä»å®šä¹‰ä¸­æˆ‘ä»¬å¯ä»¥ç†è§£ï¼šå¤šç§Ÿæˆ·æ˜¯ä¸€ç§æ¶æ„ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©å¤šç”¨æˆ·ç¯å¢ƒä¸‹ä½¿ç”¨åŒä¸€å¥—ç¨‹åºï¼Œä¸”ä¿è¯ç”¨æˆ·é—´æ•°æ®éš”ç¦»ã€‚é‚£ä¹ˆé‡ç‚¹å°±å¾ˆæµ…æ˜¾æ˜“æ‡‚äº†ï¼Œå¤šç§Ÿæˆ·çš„é‡ç‚¹å°±æ˜¯åŒä¸€å¥—ç¨‹åºä¸‹å®ç°å¤šç”¨æˆ·æ•°æ®çš„éš”ç¦»ã€‚</p>
<h2 id="æ•°æ®éš”ç¦»çš„ä¸‰ç§æ–¹æ¡ˆ">æ•°æ®éš”ç¦»çš„ä¸‰ç§æ–¹æ¡ˆ</h2>
<ol>
<li>ç‹¬ç«‹æ•°æ®åº“ï¼šç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªç§Ÿæˆ·ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“ï¼Œè¿™ç§æ•°æ®éš”ç¦»çº§åˆ«æœ€é«˜ï¼Œå®‰å…¨æ€§æœ€å¥½ï¼Œä½†æ˜¯æé«˜æˆæœ¬ã€‚</li>
<li>å…±äº«æ•°æ®åº“ã€éš”ç¦»æ•°æ®æ¶æ„ï¼šå¤šç§Ÿæˆ·ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“ï¼Œä½†æ˜¯æ¯ä¸ªç§Ÿæˆ·å¯¹åº”ä¸€ä¸ªSchema(æ•°æ®åº“user)ã€‚</li>
<li>å…±äº«æ•°æ®åº“ã€å…±äº«æ•°æ®æ¶æ„ï¼šä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“ï¼ŒåŒä¸€ä¸ªSchemaï¼Œä½†æ˜¯åœ¨è¡¨ä¸­å¢åŠ äº†<code>ç§Ÿæˆ·ID</code>çš„å­—æ®µï¼Œè¿™ç§å…±äº«æ•°æ®ç¨‹åº¦æœ€é«˜ï¼Œéš”ç¦»çº§åˆ«æœ€ä½ã€‚</li>
</ol>
<p>è¿™é‡Œé‡‡ç”¨æ–¹æ¡ˆä¸‰ï¼Œå³å…±äº«æ•°æ®åº“ï¼Œå…±äº«æ•°æ®æ¶æ„ï¼Œå› ä¸ºè¿™ç§æ–¹æ¡ˆæœåŠ¡å™¨æˆæœ¬æœ€ä½ï¼Œä½†æ˜¯æé«˜äº†å¼€å‘æˆæœ¬ã€‚</p>
<h2 id="ä½¿ç”¨mybatis-pluså®ç°å¤šç§Ÿæˆ·">ä½¿ç”¨Mybatis Pluså®ç°å¤šç§Ÿæˆ·</h2>
<blockquote>
<p>ä¸ºä»€ä¹ˆé€‰æ‹©MyBatisPlusï¼Ÿ<br>
é™¤äº†ä¸€äº›ç³»ç»Ÿå…±ç”¨çš„è¡¨ä»¥å¤–ï¼Œå…¶ä»–ç§Ÿæˆ·ç›¸å…³çš„è¡¨ï¼Œæˆ‘ä»¬éƒ½éœ€è¦åœ¨sqlä¸åŒå…¶çƒ¦çš„åŠ ä¸Š<code>AND t.tenant_id = ?</code>æŸ¥è¯¢æ¡ä»¶ï¼Œç¨ä¸æ³¨æ„å°±ä¼šå¯¼è‡´æ•°æ®è¶Šç•Œï¼Œæ•°æ®å®‰å…¨é—®é¢˜è®©äººæ‹…å¿§ã€‚å¥½åœ¨æœ‰äº†MybatisPlusè¿™ä¸ªç¥å™¨ï¼Œå¯ä»¥æä¸ºæ–¹ä¾¿çš„å®ç°å¤šç§Ÿæˆ·SQLè§£æå™¨ã€‚</p>
</blockquote>
<p>Mybatis-pluså°±æä¾›äº†ä¸€ç§å¤šç§Ÿæˆ·çš„è§£å†³æ–¹æ¡ˆï¼Œå®ç°æ–¹å¼æ˜¯åŸºäºåˆ†é¡µæ’ä»¶(æ‹¦æˆªå™¨)è¿›è¡Œå®ç°çš„ã€‚</p>
<h3 id="ç¬¬ä¸€æ­¥">ç¬¬ä¸€æ­¥</h3>
<ul>
<li>åœ¨æ•°æ®åº“ä¸­æ·»åŠ ç»´æŠ¤ä¸€å¼ sys_tenantï¼ˆç§Ÿæˆ·ç®¡ç†è¡¨ï¼‰ï¼Œ</li>
<li>åœ¨éœ€è¦è¿›è¡Œç§Ÿæˆ·æ•°æ®éš”ç¦»çš„æ•°æ®è¡¨ä¸Šæ–°å¢ç§Ÿæˆ·idï¼›</li>
</ul>
<h3 id="ç¬¬äºŒæ­¥">ç¬¬äºŒæ­¥</h3>
<p>åˆ›å»ºè¡¨ï¼š</p>
<pre><code class="language-sql">CREATE TABLE `orders_1`.`tenant`  (
  `id` int(0) NOT NULL AUTO_INCREMENT COMMENT 'è‡ªå¢ä¸»é”®',
  `expire_date` datetime(0) COMMENT 'åè®®åˆ°æœŸæ—¶é—´',
  `amount` decimal(8, 2) COMMENT 'é‡‘é¢',
  `tenant_id` int(0) COMMENT 'ç§Ÿæˆ·ID',
  PRIMARY KEY (`id`)
);
</code></pre>
<p>è‡ªå®šä¹‰ç³»ç»Ÿçš„ä¸Šä¸‹æ–‡ï¼Œå­˜å‚¨ä»cookieç­‰æ–¹å¼è·å–çš„ç§Ÿæˆ·IDï¼Œåœ¨åç»­çš„getTenantId()ä½¿ç”¨ã€‚</p>
<pre><code class="language-java">/**
 * ç³»ç»Ÿçš„ä¸Šä¸‹æ–‡å¸®åŠ©ç±»ã€‚ConcurrentHashMapè®¾ç½®ç§Ÿæˆ·IDï¼Œä¾›åç»­çš„MPçš„getTenantId()å–å‡º
 *
 * @author liyan
 * @since 2021.1.27
 */
@Component
public class ApiContext {
  private static final String KEY_CURRENT_TENANT_ID = &quot;KEY_CURRENT_TENANT_ID&quot;;
  private static final Map&lt;String, Object&gt; mContext = new ConcurrentHashMap&lt;&gt;();

  public void setCurrentTenantId(Long providerId) {
    mContext.put(KEY_CURRENT_TENANT_ID, providerId);
  }

  public Long getCurrentTenantId() {
    return (Long) mContext.get(KEY_CURRENT_TENANT_ID);
  }
}
</code></pre>
<p>åˆ›å»ºMybatis Plusé…ç½®ç±»<code>MyBatisPlusConfig</code>é€šè¿‡åˆ†é¡µæ’ä»¶é…ç½®MPå¤šç§Ÿæˆ·ã€‚</p>
<pre><code class="language-java">package com.zkyc.school.config.mybatisplus;

import com.baomidou.mybatisplus.core.injector.ISqlInjector;
import com.baomidou.mybatisplus.core.parser.ISqlParser;
import com.baomidou.mybatisplus.extension.injector.LogicSqlInjector;
import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;
import com.baomidou.mybatisplus.extension.plugins.tenant.TenantHandler;
import com.baomidou.mybatisplus.extension.plugins.tenant.TenantSqlParser;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import net.sf.jsqlparser.expression.Expression;
import net.sf.jsqlparser.expression.LongValue;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

/**
 * @author liyan
 * @since 2021.1.25
 */
@Configuration
public class MyBatisPlusConfiguration {

  @Autowired
  private ApiContext apiContext;

  /**
     * åˆ†é¡µæ‹¦æˆªå™¨
     * @return
     */
  @Bean
  public PaginationInterceptor paginationInterceptor() {
    PaginationInterceptor paginationInterceptor = new PaginationInterceptor();

    // åˆ›å»ºSQLè§£æå™¨é›†åˆ
    List&lt;ISqlParser&gt; sqlParserList = new ArrayList&lt;&gt;();

    // åˆ›å»ºç§Ÿæˆ·SQLè§£æå™¨
    TenantSqlParser tenantSqlParser = new TenantSqlParser();

    // è®¾ç½®ç§Ÿæˆ·å¤„ç†å™¨
    tenantSqlParser.setTenantHandler(new TenantHandler() {

      // è®¾ç½®å½“å‰ç§Ÿæˆ·ID
      @Override
      public Expression getTenantId() {
        // ä»å½“å‰ç³»ç»Ÿä¸Šä¸‹æ–‡ä¸­å–å‡ºå½“å‰è¯·æ±‚çš„æœåŠ¡å•†IDï¼Œé€šè¿‡è§£æå™¨æ³¨å…¥åˆ°SQLä¸­ã€‚
        Long currentProviderId = apiContext.getCurrentTenantId();
        if (null == currentProviderId) {
          throw new RuntimeException(&quot;Get CurrentProviderId error.&quot;);
        }
        return new LongValue(currentProviderId);
      }

      @Override
      public String getTenantIdColumn() {
        // å¯¹åº”æ•°æ®åº“ä¸­ç§Ÿæˆ·IDçš„åˆ—å
        return &quot;tenant_id&quot;;
      }

      @Override
      public boolean doTableFilter(String tableName) {
        // æ·»åŠ è¦è¿‡æ»¤çš„è¡¨
        List&lt;String&gt; tableNameList = Arrays.asList(&quot;user_info&quot;,&quot;user_token&quot;);
        if (tableNameList.contains(tableName)) {
          return true;
        }
        return false;
      }
    });

    sqlParserList.add(tenantSqlParser);
    paginationInterceptor.setSqlParserList(sqlParserList);

    return paginationInterceptor;
  }

}
</code></pre>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<p>é…ç½®å¥½ä¹‹åï¼Œä¸ç®¡æ˜¯æŸ¥è¯¢ã€æ–°å¢ã€ä¿®æ”¹åˆ é™¤æ–¹æ³•ï¼ŒMPéƒ½ä¼šè‡ªåŠ¨åœ¨SQLä¸Šæ‹¼æ¥ç§Ÿæˆ·IDçš„æ ‡è¯†<code>WHERE tenant_id = 1</code>ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[çœ‹è¿‡çš„å½±ç‰‡]]></title>
        <id>https://www.shiguangping.com/post/movies/</id>
        <link href="https://www.shiguangping.com/post/movies/">
        </link>
        <updated>2021-01-24T17:46:55.000Z</updated>
        <content type="html"><![CDATA[<p>è§‚å½±æ—¥æœŸï¼š2021å¹´2æœˆ20æ—¥</p>
<table>
<thead>
<tr>
<th>å°é¢</th>
<th>å½±ç‰‡åç§°</th>
<th>æ¼”å‘˜</th>
<th>å¹´ä»£</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://images.shiguangping.com/imgs/20210221015329.webp" style="width: 120px"/></td>
<td>æ—ºè¾¾å¹»è§† WandaVision</td>
<td>ä¼Šä¸½èç™½Â·å¥¥å°”æ£® / ä¿ç½—Â·è´å¦å°¼</td>
<td>2021</td>
</tr>
</tbody>
</table>
<hr>
<p>è§‚å½±æ—¥æœŸï¼š2021å¹´1æœˆ31æ—¥</p>
<table>
<thead>
<tr>
<th>å°é¢</th>
<th>å½±ç‰‡åç§°</th>
<th>æ¼”å‘˜</th>
<th>å¹´ä»£</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://images.shiguangping.com/imgs/20210131135526.webp" style="width: 120px"/></td>
<td>é€šç¼‰ä»¤ Wanted</td>
<td><a href="https://movie.douban.com/celebrity/1006958/">è©¹å§†æ–¯Â·éº¦å¡æ²ƒä¼Š</a> / <a href="https://movie.douban.com/celebrity/1054534/">æ‘©æ ¹Â·å¼—é‡Œæ›¼</a> / <a href="https://movie.douban.com/celebrity/1054447/">å®‰å‰ä¸½å¨œÂ·æœ±è‰</a></td>
<td>2008</td>
</tr>
<tr>
<td><img src="https://images.shiguangping.com//imgs/20210201093756.webp" style="width: 120px;" /></td>
<td>å‚²æ…¢ä¸åè§ Pride &amp; Prejudice</td>
<td><a href="https://movie.douban.com/celebrity/1054448/">å‡¯æ‹‰Â·å¥ˆç‰¹è‰</a> / <a href="https://movie.douban.com/celebrity/1025138/">é©¬ä¿®Â·éº¦å…‹è´¹ç™»</a></td>
<td>2005</td>
</tr>
</tbody>
</table>
<hr>
<p>è§‚å½±æ—¶é—´ï¼š2021å¹´1æœˆ</p>
<table>
<thead>
<tr>
<th>å°é¢</th>
<th>å½±ç‰‡åç§°</th>
<th>æ¼”å‘˜</th>
<th>å¹´ä»£</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://images.shiguangping.com//imgs/20210126114425.webp" width="120px"/></td>
<td>æˆ‘æ˜¯å¤§å“¥å¤§ ç”µå½±ç‰ˆ ä»Šæ—¥ã‹ã‚‰ä¿ºã¯ï¼ï¼åŠ‡å ´ç‰ˆ</td>
<td><a href="https://movie.douban.com/celebrity/1275257/">è´ºæ¥è´¤äºº</a> / <a href="https://movie.douban.com/celebrity/1350151/">ä¼Šè—¤å¥å¤ªéƒ</a> / <a href="https://movie.douban.com/celebrity/1340151/">æ¸…é‡èœå</a> / <a href="https://movie.douban.com/celebrity/1322189/">æ¡¥æœ¬ç¯å¥ˆ</a></td>
<td>2020</td>
</tr>
<tr>
<td><img src="https://images.shiguangping.com//imgs/20210125132732.webp" style="width: 120px;" /></td>
<td>åº·æ–¯å¦ä¸ Constantine</td>
<td>é©¬ç‰¹Â·ç‘å®‰/ Lucy Griffiths</td>
<td>2014</td>
</tr>
<tr>
<td><img src="https://images.shiguangping.com//imgs/20210125112337.webp" width="120px"/></td>
<td>A Discovery of Witches Season 2</td>
<td><a href="https://movie.douban.com/celebrity/1000008/">é©¬ä¿®Â·å¤è¿ª</a> / <a href="https://movie.douban.com/celebrity/1031836/">æ³°è‰èÂ·å¸•å°”å¢¨</a></td>
<td>2021</td>
</tr>
</tbody>
</table>
<hr>
<p>è§‚å½±æ—¶é—´ï¼šæ›´æ—©</p>
<table>
<thead>
<tr>
<th>å°é¢</th>
<th>å½±ç‰‡åç§°</th>
<th>æ¼”å‘˜</th>
<th>å¹´ä»£</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://images.shiguangping.com//imgs/20210125112201.webp" width="120px"/></td>
<td>A Discovery of Witches Season 1</td>
<td><a href="https://movie.douban.com/celebrity/1000008/">é©¬ä¿®Â·å¤è¿ª</a> / <a href="https://movie.douban.com/celebrity/1031836/">æ³°è‰èÂ·å¸•å°”å¢¨</a></td>
<td>2018</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Flutterç¬”è®°]]></title>
        <id>https://www.shiguangping.com/post/flutter/</id>
        <link href="https://www.shiguangping.com/post/flutter/">
        </link>
        <updated>2021-01-23T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<p>::: tip</p>
<p>ä»Šå¤©æ˜¯æˆ‘çš„ç”Ÿæ—¥ï¼Œç¥æˆ‘ç”Ÿæ—¥å¿«ä¹ğŸ‰ã€‚</p>
<p>:::</p>
<img src="https://images.shiguangping.com/imgs/20210124214824.png" alt="image-20210124214824401" style="width: 500px"/>
<blockquote>
<p>åœ¨Flutterä¸­ä¸€åˆ‡çš†æ˜¯ç»„ä»¶<code>widget</code>ã€‚</p>
</blockquote>
<h2 id="ç¬¬ä¸€ä¸ªdemo">ç¬¬ä¸€ä¸ªDemo</h2>
<pre><code class="language-dart">import 'package:flutter/cupertino.dart';

void main()=&gt;runApp(
  new Center(
    child: new Text(
      'ä½ å¥½ Flutter',
      textDirection: TextDirection.ltr,
    ),
  )
);
</code></pre>
<p>æ¨¡æ‹Ÿå™¨æ•ˆæœï¼š</p>
<img src="https://images.shiguangping.com/imgs/20210124205345.png" style="width: 150px"/>
<p>åœ¨Dartä¸­å®ä¾‹åŒ–å¯¹è±¡å¯ä»¥çœç•¥<code>new</code>å…³é”®å­—</p>
<pre><code class="language-dart">import 'package:flutter/cupertino.dart';

void main()=&gt;runApp(
   Center(
    child:  Text(
      'ä½ å¥½ Flutter',
      textDirection: TextDirection.ltr,
    ),
  )
);
</code></pre>
<h2 id="è‡ªå®šä¹‰ç»„ä»¶">è‡ªå®šä¹‰ç»„ä»¶</h2>
<p>åœ¨Flutterä¸­ï¼Œç»„ä»¶<code>widget</code>å®é™…ä¸Šæ˜¯ä¸€ä¸ªç±»ï¼Œè‡ªå®šä¹‰ç»„ä»¶å°±æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªç±»ã€‚</p>
<p>å®šä¹‰ä¸€ä¸ªç±»ï¼Œç»§æ‰¿<code>StatelessWidget</code>æˆ–è€…<code>StatefulWidget</code>æŠ½è±¡ç±»ã€‚å‰è€…è¡¨ç¤ºæ— çŠ¶æ€ç»„ä»¶ï¼Œåè€…è¡¨ç¤ºæœ‰çŠ¶æ€ç»„ä»¶ã€‚</p>
<p>å®ç°æŠ½è±¡ç±»ä¸­çš„<code>build()</code>æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª<code>Widget</code>ã€‚</p>
<pre><code class="language-dart">import 'package:flutter/cupertino.dart';

void main()=&gt;runApp(MyApp());

// è‡ªå®šä¹‰ç»„ä»¶
class MyApp extends StatelessWidget{
@override
  Widget build(BuildContext context) {
    // TODO: implement build
    return Center(
      child:  Text(
        'ä½ å¥½ Flutter',
        textDirection: TextDirection.ltr,
      ),
    );
  }
}
</code></pre>
<h2 id="ç»„ä»¶">ç»„ä»¶</h2>
<h3 id="material">Material</h3>
<p><code>MaterialApp</code>æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„Widgetï¼Œå®ƒå°è£…äº†åº”ç”¨ç¨‹åºå®ç°Material Designæ‰€éœ€çš„ä¸€äº›Widgetã€‚ä¸€èˆ¬ä½œä¸ºä¸€ä¸ªAppä¸­æœ€åŸºç¡€çš„widgetä½¿ç”¨ï¼Œå…¶ä½™ç»„ä»¶éƒ½æ„å»ºåœ¨è¿™ä¸ªç»„ä»¶ä¸Šã€‚</p>
<p><code>MatetialApp</code>ä¸­å¸¸ç”¨å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>home</td>
<td>ä¸»é¡µ</td>
</tr>
<tr>
<td>title</td>
<td>æ ‡é¢˜</td>
</tr>
<tr>
<td>color</td>
<td>é¢œè‰²</td>
</tr>
<tr>
<td>theme</td>
<td>ä¸»é¢˜</td>
</tr>
<tr>
<td>routes</td>
<td>è·¯ç”±</td>
</tr>
</tbody>
</table>
<h3 id="scaffold">Scaffold</h3>
<p><code>Scaffold</code>æ˜¯ Material Designå¸ƒå±€ç»“æ„çš„åŸºæœ¬å®ç°ã€‚æ­¤ç±»æä¾›äº†ç”¨äºæ˜¾ç¤º<code>drawer</code>ã€<code>snackbar</code>å’Œåº•éƒ¨<code>sheet</code>çš„APIã€‚</p>
<p><code>Scaffold</code>ä¸»è¦çš„å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>appBar</td>
<td>æ˜¾ç¤ºåœ¨ç•Œé¢é¡¶éƒ¨çš„AppBar</td>
</tr>
<tr>
<td>body</td>
<td>å½“å‰ç•Œé¢æ‰€æ˜¾ç¤ºçš„ä¸»è¦å†…å®¹ Widget</td>
</tr>
<tr>
<td>drawer</td>
<td>æŠ½å±‰èœå•æ§ä»¶</td>
</tr>
</tbody>
</table>
<pre><code class="language-dart">import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

void main() =&gt; runApp(MyApp());

// è‡ªå®šä¹‰ç»„ä»¶
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // TODO: implement build
    return HomeContent();
  }
}

class HomeContent extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // TODO: implement build
    return MaterialApp(
        title: 'First App Demo',
        home: Scaffold(
            appBar: AppBar(
              title: Text('flutter'),
            ),
            body: Center(
              child: Text(
                'Happy Birthday ~',
                style: TextStyle(
                    fontSize: 30.0,
                    color: Colors.blue,
                    fontWeight: FontWeight.w500),
                textDirection: TextDirection.ltr,
              ),
            )),
        theme: ThemeData(
          primaryColor: Colors.white
        )
    );
  }
}
</code></pre>
<p>æ¨¡æ‹Ÿå™¨æ•ˆæœï¼š</p>
<img src="https://images.shiguangping.com/imgs/20210124215829.png" alt="image-20210124215829363" style="width: 150px;" />
<h3 id="container">Container</h3>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>height</td>
<td>å®¹å™¨é«˜åº¦ doubleç±»å‹</td>
</tr>
<tr>
<td>width</td>
<td>å®¹å™¨å®½åº¦ doubleç±»å‹</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SpringBoot-å®šæ—¶ä»»åŠ¡]]></title>
        <id>https://www.shiguangping.com/post/spring-boot-schedule/</id>
        <link href="https://www.shiguangping.com/post/spring-boot-schedule/">
        </link>
        <updated>2021-01-13T16:00:00.000Z</updated>
    </entry>
    <entry>
        <title type="html"><![CDATA[SpringBoot-é›†æˆThymeleafæ„å»ºWebåº”ç”¨]]></title>
        <id>https://www.shiguangping.com/post/spring-boot-thymeleaf/</id>
        <link href="https://www.shiguangping.com/post/spring-boot-thymeleaf/">
        </link>
        <updated>2021-01-13T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<p>Thymeleafæ˜¯æ¨¡æ¿å¼•æ“ï¼Œå¯ä»¥æ›¿ä»£JSPæ„å»ºWebé¡µé¢ã€‚</p>
<p>å®˜æ–¹åœ°å€ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a></p>
<h2 id="é›†æˆthymeleaf">é›†æˆThymeleaf</h2>
<h3 id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®</h3>
<p>ä½¿ç”¨<code>Spring Initializr</code>åˆ›å»ºSpringBooté¡¹ç›®ï¼Œæ·»åŠ Mavenä¾èµ–ã€‚</p>
<p>::: details pom.xml</p>
<pre><code class="language-xml">&lt;dependencies&gt;
  &lt;!-- Thymeleaf --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
  &lt;/dependency&gt;

  &lt;!-- spring mvcã€Tomcatç›¸å…³ä¾èµ– --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
  &lt;/dependency&gt;

  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>:::</p>
<h3 id="èµ„æºç›®å½•">èµ„æºç›®å½•</h3>
<p>SpringBooté»˜è®¤çš„é™æ€èµ„æºç›®å½•ï¼ŒSpringBooté»˜è®¤çš„é™æ€èµ„æºç›®å½•éœ€ç½®äºclasspathä¸‹</p>
<ul>
<li>/static</li>
<li>/public</li>
<li>/resources</li>
<li>/META-INF/resources</li>
</ul>
<p>ä»¥ä¸Šå››ä¸ªç›®å½•ä¸‹çš„é™æ€èµ„æºéƒ½ä¼šè¢«åŠ è½½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨<code>/src/main/resources</code>ä¸‹æ–°å»º<code>static</code>ç›®å½•ï¼Œå¹¶æ”¾å…¥ä¸€å¼ å›¾ç‰‡<code>pic.jpg</code>ã€‚å¯åŠ¨SpringBootï¼Œè®¿é—®<code>localhost:8080/pic.jpg</code>ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®<code>static</code>ä¸‹çš„å›¾ç‰‡ã€‚</p>
<p>SpringBooté»˜è®¤çš„æ¨¡æ¿è·¯å¾„ä¸ºï¼š<code>src/main/resources/templates</code></p>
<p><a href="https://javabook.shiguangping.com/frame4/%E5%AF%BC%E5%85%A5%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90.html">ã€ŠJavaé˜¶æ®µæ€§ç¬”è®°ã€‹è®°å½•</a></p>
<h3 id="æ·»åŠ æ¨¡æ¿é¡µé¢">æ·»åŠ æ¨¡æ¿é¡µé¢</h3>
<p><code>src/main/resources/templates</code>ä¸‹æ–°å»º<code>index.html</code>æ–‡ä»¶ã€‚</p>
<p>::: details index.html</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot;&gt;
    &lt;title&gt;é¦–é¡µ&lt;/title&gt;
    &lt;link rel=&quot;shortcut icon&quot; th:href=&quot;@{/favicon.ico}&quot;/&gt;
    &lt;link th:href=&quot;@{/static/css/bootstrap.min.css}&quot; rel=&quot;stylesheet&quot;/&gt;
    &lt;link th:href=&quot;@{/static/css/font-awesome.min.css}&quot; rel=&quot;stylesheet&quot;/&gt;
&lt;/head&gt;
&lt;body class=&quot;fixed-sidebar full-height-layout gray-bg&quot; style=&quot;overflow:hidden&quot;&gt;
&lt;div id=&quot;wrapper&quot;&gt;
    &lt;h1 th:text=&quot;${msg}&quot;&gt;&lt;/h1&gt;
&lt;/div&gt;
&lt;script th:src=&quot;@{/static/js/jquery.min.js}&quot;&gt;&lt;/script&gt;
&lt;script th:src=&quot;@{/static/js/bootstrap.min.js}&quot;&gt;&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>:::</p>
<p>htmlæ ‡ç­¾æ·»åŠ å‘½åç©ºé—´ï¼Œè¿™æ ·åœ¨é¡µé¢å†…å¯ä»¥ä½¿ç”¨<code>th:</code>ç»‘å®šæ ‡ç­¾å†…çš„å±æ€§ã€‚</p>
<pre><code class="language-html">&lt;!-- æ·»åŠ Thymeleafå‘½åç©ºé—´ --&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
</code></pre>
<p><code>@{}</code>ç”¨æ¥å¼•ç”¨æœ¬åœ°é™æ€èµ„æº</p>
<p><code>${}</code>æ¥æ”¶å˜é‡</p>
<p><a href="https://thymeleaf.shiguangping.com">ã€ŠThymeleafæ•™ç¨‹ã€‹</a></p>
<h3 id="ç¼–å†™controller">ç¼–å†™Controller</h3>
<p>::: details IndexController.java</p>
<pre><code class="language-java">package com.shiguangping.thymeleaf.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

/**
 * é¦–é¡µæ§åˆ¶å™¨
 *
 * @author liyan
 * @since 2021.1.14
 */
@Controller
public class IndexController {

    @RequestMapping({&quot;/&quot;, &quot;index&quot;})
    public String index(Model model) {
        model.addAttribute(&quot;msg&quot;, &quot;Hello Thymeleaf~&quot;);
        return &quot;index&quot;;
    }
}
</code></pre>
<p>:::</p>
<p>Modelå¯¹è±¡ä¸­æ·»åŠ å±æ€§ï¼ˆé”®å€¼å¯¹ï¼‰<code>msg</code>ï¼Œä¹‹åè¿”å›åˆ°<code>index</code>é¡µé¢ã€‚</p>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<p>å¯åŠ¨SpringBootï¼Œè®¿é—®<code>localhost:8080/index</code>,é¡µé¢æ˜¾ç¤º&quot;Hello Thymeleaf~&quot;ï¼Œè®¿é—®æˆåŠŸã€‚</p>
<h2 id="githubæºç ">Githubæºç </h2>
<p><a href="https://github.com/ENNRIaaa/SpringBootShip/tree/main/springboot-thymeleaf">springboot-thymeleaf</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Springè·¨åŸŸè¯·æ±‚é—®é¢˜]]></title>
        <id>https://www.shiguangping.com/post/spring-cross/</id>
        <link href="https://www.shiguangping.com/post/spring-cross/">
        </link>
        <updated>2021-01-13T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<figure data-type="image" tabindex="1"><img src="https://images.shiguangping.com//imgs/20210114155033.png" alt="image-20210114155026514" loading="lazy"></figure>
<p>è·¨åŸŸè¯·æ±‚é—®é¢˜ã€‚</p>
<p>å¯ä»¥åœ¨Controllerç±»æˆ–è€…æ–¹æ³•ä¸Šä½¿ç”¨<code>@CrossOrigin</code>æ³¨è§£ã€‚</p>
<p>æˆ–è€…é€šè¿‡JavaConfigå…¨å±€é…ç½®ï¼š</p>
<pre><code class="language-java">package com.zkyc.education.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
import org.springframework.web.filter.CorsFilter;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;

import java.util.ArrayList;
import java.util.List;

/**
 * @author liyan
 */
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping(&quot;/**&quot;)
                .allowedOrigins(&quot;*&quot;)
                .allowCredentials(true)
                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PUT&quot;)
                .maxAge(3600);
    }
    private CorsConfiguration addcorsConfig() {
        CorsConfiguration corsConfiguration = new CorsConfiguration();
        List&lt;String&gt; list = new ArrayList&lt;&gt;();
        list.add(&quot;*&quot;);
        corsConfiguration.setAllowedOrigins(list);

        // è¯·æ±‚å¸¸ç”¨çš„ä¸‰ç§é…ç½®ï¼Œ*ä»£è¡¨å…è®¸æ‰€æœ‰ï¼Œå½“æ—¶ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å±æ€§ï¼ˆæ¯”å¦‚headeråªèƒ½å¸¦ä»€ä¹ˆï¼Œåªèƒ½æ˜¯postæ–¹å¼ç­‰ç­‰ï¼‰
        corsConfiguration.addAllowedOrigin(&quot;*&quot;);
        corsConfiguration.addAllowedHeader(&quot;*&quot;);
        corsConfiguration.addAllowedMethod(&quot;*&quot;);
        return corsConfiguration;
    }
    @Bean
    public CorsFilter corsFilter() {
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration(&quot;/**&quot;, addcorsConfig());
        return new CorsFilter(source);
    }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SpringBoot-æ‰‹å†™ä¸€ä¸ªStarter]]></title>
        <id>https://www.shiguangping.com/post/spring-boot-starter/</id>
        <link href="https://www.shiguangping.com/post/spring-boot-starter/">
        </link>
        <updated>2021-01-12T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<h2 id="æ‰‹å†™starter">æ‰‹å†™Starter</h2>
<h3 id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®</h3>
<p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®ï¼Œæˆ–è€…é€šè¿‡Spring Initializråˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼Œæ·»åŠ Mavenä¾èµ–ï¼š</p>
<p>::: details pom.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.4.1&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;

    &lt;groupId&gt;com.shiguangping&lt;/groupId&gt;
    &lt;artifactId&gt;simple-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;

    &lt;name&gt;simple-spring-boot-starter&lt;/name&gt;
    &lt;description&gt;æ‰‹å†™ä¸€ä¸ªstarteræ¼”ç¤º&lt;/description&gt;

    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;skip&gt;true&lt;/skip&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;
</code></pre>
<p>:::</p>
<h4 id="starterå‘½åè§„èŒƒ">Starterå‘½åè§„èŒƒ</h4>
<p>Springå®˜æ–¹Starterå‘½åé€šå¸¸ä¸ºï¼š<code>spring-boot-starter-{name}</code></p>
<p>Springå®˜æ–¹å»ºè®®éå®˜æ–¹çš„Starterå‘½åéµå¾ªï¼š<code>{name}-spring-boot-starter</code>æ ¼å¼</p>
<h3 id="ç¼–å†™service">ç¼–å†™Service</h3>
<p>serviceä¸­å†™äº†ä¸€ä¸ªæ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œå®šä¹‰äº†å‰ç¼€å’Œåç¼€ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼Œæ–¹æ³•è¿”å›æ‹¼æ¥åçš„å­—ç¬¦ä¸²ã€‚</p>
<p>::: details ExampleService.java</p>
<pre><code class="language-java">package com.shiguangping.service;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * ç¤ºä¾‹Service
 *
 * @author liyan
 * @since 2021.1.13
 */
@Data
@AllArgsConstructor
@NoArgsConstructor
public class ExampleService {

    private String prefix;

    private String suffix;

    /**
     * æ‹¼è£…å­—ç¬¦ä¸²
     *
     * @param word
     * @return
     */
    public String wrap(String word) {
        return prefix + word + suffix;
    }
}
</code></pre>
<p>:::</p>
<h3 id="ç¼–å†™å±æ€§ç±»">ç¼–å†™å±æ€§ç±»</h3>
<p>::: details ExampleServiceProperties.java</p>
<pre><code class="language-java">package com.shiguangping.configure;

import lombok.Data;
import org.springframework.boot.context.properties.ConfigurationProperties;

/**
 * å±æ€§
 *
 * @author liyan
 * @since 2021.1.13
 */
@Data
@ConfigurationProperties(prefix = &quot;example.service&quot;)
public class ExampleServiceProperties {

    private String prefix;

    private String suffix;
}
</code></pre>
<p>:::</p>
<h3 id="ç¼–å†™è‡ªåŠ¨é…ç½®ç±»">ç¼–å†™è‡ªåŠ¨é…ç½®ç±»</h3>
<p>::: details ExampleAutoConfigure.java</p>
<pre><code class="language-java">package com.shiguangping.configure;

import com.shiguangping.service.ExampleService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

/**
 * è‡ªåŠ¨é…ç½®ç±»
 *
 * @author liyan
 * @since 2021.1.13
 */
@Configuration
@ConditionalOnClass(ExampleService.class)
@EnableConfigurationProperties(ExampleServiceProperties.class)
public class ExampleAutoConfigure {

    @Autowired
    private ExampleServiceProperties properties;

    @Bean
    @ConditionalOnMissingBean
    @ConditionalOnProperty(prefix = &quot;example.service&quot;, value = &quot;enabled&quot;, havingValue = &quot;true&quot;)
    ExampleService exampleService() {
        return new ExampleService(properties.getPrefix(), properties.getSuffix());
    }
}
</code></pre>
<p>:::</p>
<h3 id="æ·»åŠ springfactories">æ·»åŠ spring.factories</h3>
<p>åœ¨<code>resources/META-INF/</code>ä¸‹åˆ›å»º<code>spring.factories</code>æ–‡ä»¶ï¼š</p>
<pre><code class="language-factories">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  com.shiguangping.configure.ExampleAutoConfigure
</code></pre>
<p>å¦‚æœæœ‰å¤šä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œç”¨é€—å·åˆ†éš”æ¢è¡Œã€‚Spring Bootä¼šæœ€å…ˆåˆ°META-INFä¸‹å¯»æ‰¾è‡ªåŠ¨é…ç½®ç±»ã€‚</p>
<h3 id="æ‰“åŒ…">æ‰“åŒ…</h3>
<p>ç»ˆç«¯è¿è¡Œ<code>mvn install</code>å‘½ä»¤ï¼Œå°†é¡¹ç›®æ‰“åŒ…å¹¶å‘å¸ƒåˆ°æœ¬åœ°çš„Mavenä»“åº“ã€‚</p>
<p>å¦‚æœæ˜¯Spring Booté¡¹ç›®ï¼Œéœ€è¦åœ¨æ’ä»¶é…ç½®ä¸­æ·»åŠ <code>skip</code>æ ‡ç­¾ï¼š</p>
<p>::: details pom.xml</p>
<pre><code class="language-xml">&lt;plugin&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;skip&gt;true&lt;/skip&gt;
    &lt;excludes&gt;
      &lt;exclude&gt;
        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
        &lt;artifactId&gt;lombok&lt;/artifactId&gt;
      &lt;/exclude&gt;
    &lt;/excludes&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>
<p>:::</p>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<p>æ–°å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼Œå¼•å…¥Mavenä¾èµ–ï¼š</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.shiguangping&lt;/groupId&gt;
  &lt;artifactId&gt;simple-spring-boot-starter&lt;/artifactId&gt;
  &lt;version&gt;1.0.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>application.yml</code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="language-yaml">example:
  service:
    enabled: true
    suffix: Nice
    prefix: Hello
</code></pre>
<p>ç¼–å†™æµ‹è¯•ç±»ï¼š</p>
<pre><code class="language-java">package com.example.demo.simple;

import com.shiguangping.service.ExampleService;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@SpringBootTest
@RunWith(SpringRunner.class)
public class SimpleTest {

    @Autowired
    private ExampleService exampleService;

    @Test
    public void test(){
        String s = exampleService.wrap(&quot;Java&quot;);
        System.out.println(s);
    }

}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code>HelloJavaNice
</code></pre>
<p>æ‰‹å†™Starterå¼•ç”¨æˆåŠŸ~</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<ol>
<li>Spring Bootå¯åŠ¨æ—¶ä¼šå…ˆæ‰«æå¼•å…¥çš„æ‰€æœ‰ä¾èµ–ï¼Œå¯»æ‰¾å¸¦æœ‰<code>spring.factories</code>æ–‡ä»¶çš„JaråŒ…ï¼›</li>
<li>æ ¹æ®<code>spring.factories</code>æ–‡ä»¶åŠ è½½<code>AutoConfigure</code>ç±»ï¼›</li>
<li>æ ¹æ®è‡ªåŠ¨é…ç½®ç±»ä¸­<code>@Conditional</code>æ³¨è§£çš„æ¡ä»¶ï¼Œè¿›è¡Œè‡ªåŠ¨é…ç½®ï¼Œå¹¶å°†Beanæ³¨å†Œåˆ°Springå®¹å™¨å½“ä¸­ã€‚</li>
</ol>
<h2 id="githubæºç ">Githubæºç </h2>
<p><a href="https://github.com/ENNRIaaa/SpringBootShip/tree/main/springboot-starter">springboot-starter</a></p>
]]></content>
    </entry>
</feed>